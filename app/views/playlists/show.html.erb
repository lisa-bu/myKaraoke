<div class="playlist-show-page">
  <div class="playlist-show-content">
    <%= render "shared/search", playlist: @playlist %>
    <div class="playlist-container">
      <% if params[:query].present? %>
        <%= render "shared/search_results", playlist: @playlist, songs: @songs %>
      <% else %>
        <div class="playlist-title-wrapper text-center mb-3" data-controller="marquee">
          <div class="song-info-scroll">
            <h1 class="playlist-title text-white d-inline-block m-0"><%= @playlist.name %></h1>
          </div>
        </div>
        <ul class="playlist-song-list">
          <% @playlist.playlist_songs.each do |playlist_song| %>
            <li class="d-flex align-items-center"
            data-controller="spotify-player"
            data-spotify-player-uri-value="spotify:track:<%= playlist_song.song.spotify_id %>">
              <%= image_tag playlist_song.song.image_url, class: "img-thumbnail", style: "width: 45px; height: 45px; box-shadow: 0 2px 8px rgba(0,0,0,0.3);" %>
              <div class="song-info-wrapper flex-grow-1 mx-2" data-controller="marquee">
                <div class="song-info-scroll">
                  <span class="song-text"><strong><%= playlist_song.song.name %></strong> â€” <%= playlist_song.song.artist %></span>
                </div>
              </div>
              <%= link_to song_lyrics_path(playlist_song.song),
                  data: { turbo_stream: true },
                  style: "background: none; border: none; cursor: pointer; padding: 8px; text-decoration: none;" do %>
                <i class="fa-solid fa-microphone" style="color: #FF6B6B; font-size: 18px;"></i>
              <% end %>
              <button data-action="click->spotify-player#togglePlay"
                data-spotify-player-target="button"
                style="background: none; border: none; cursor: pointer; padding: 8px;">
                <i class="fa-solid fa-play"
            data-spotify-player-target="icon"
            style="color: #1DB954; font-size: 20px;"></i>
              </button>
              <div data-spotify-player-target="container" hidden></div>
              <i class="fa-solid fa-circle-check" data-action="click->swipe#hide" style="font-size: 20px; cursor: pointer;"></i>
            </li>
          <% end %>
        </ul>
      <% end %>
    </div>
  </div>
  <%= render "playlist_buttons", playlist: @playlist %>
</div>
