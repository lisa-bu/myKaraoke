<%= render "shared/search", playlist: @playlist %>
<div class="home-screen">
  <div class="playlist-container">

    <% if @playlist.user == current_user %>
      <% if params[:query].present? %>
        <%= render "shared/search_results", playlist: @playlist, songs: @songs %>
      <% else %>

        <!-- not search yet  -->
        <h1 class="playlist-title" style="color: black"><%= @playlist.name %></h1>
        <ul class="playlist-song-list">
          <% @playlist.playlist_songs.each do |playlist_song| %>
            <li class="playlist-song-row">
              <div class="playlist-song-text">
                <span class="playlist-song-name"><%= playlist_song.song.name %></span>
                <span class="playlist-song-artist"> — <%= playlist_song.song.artist %></span>
              </div>
            </li>
          <% end %>
        </ul>

        <%= link_to "Make Current Playlist",
                    user_path(current_user, current_playlist_id: @playlist.id),
                    data: { turbo_method: :patch },
                    class: "btn btn-success mt-3 playlist-current-btn" %>
      <% end %>
    <% else %>
      <!-- read only playlist-->
      <h1 class="playlist-title"><%= @playlist.name %></h1>
      <ul class="playlist-song-list">
        <% @playlist.playlist_songs.each do |playlist_song| %>
          <li class="playlist-song-row">
            <div class="playlist-song-text">
              <span class="playlist-song-name"><%= playlist_song.song.name %></span>
              <span class="playlist-song-artist"> — <%= playlist_song.song.artist %></span>
            </div>
          </li>
        <% end %>
      </ul>
      <%= link_to "Make Current Playlist",
                  user_path(current_user, current_playlist_id: @playlist.id),
                  data: { turbo_method: :patch },
                  class: "btn btn-success mt-3" %>
    <% end %>

        <%= link_to "Back", playlists_path, class: "btn btn-info" %>
        <% alert = @playlist.id == current_user.current_playlist_id ? "Cannot delete currently playing playlist" : "Are you sure you want to delete this playlist?" %>
        <%= link_to "Delete", playlist_path(@playlist),class: "btn btn-danger top-0 end-0 m-2", data: { turbo_method: :delete, turbo_confirm: alert } %>
</div>
