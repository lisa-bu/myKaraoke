<!-- search mode -->
<div class="song-cards-list">
  <% if songs.any? %>
    <% songs.each do |song| %>
      <div class="song-card-browse">
        <div class="song-card-stack">
          <!-- Under-layer card (lighter grey) - tap for lyrics -->
          <%= link_to song_lyrics_path(song),
              data: { turbo_stream: true },
              class: "song-card-under" do %>
            <span class="hint-left">tap to view lyrics</span>
            <span class="hint-right">tap + to add to karaoke session</span>
          <% end %>
          <!-- Main card (darker grey) -->
          <div class="song-card"
               data-controller="song-text"
               data-action="click->song-text#toggle">
            <%= image_tag song.image_url, class: "song-card-image" %>
            <div class="song-card-info" data-song-text-target="info">
              <span class="song-card-text" data-song-text-target="text"><%= song.artist %> - <%= song.name %></span>
              <%= karaoke_availability_badges(song) %>
            </div>
            <div class="song-card-play"
                 data-controller="spotify-player"
                 data-spotify-player-uri-value="spotify:track:<%= song.spotify_id %>">
              <button data-action="click->spotify-player#togglePlay"
                      data-spotify-player-target="button"
                      class="play-pause-btn">
                <i class="fa-solid fa-play" data-spotify-player-target="icon"></i>
              </button>
              <div data-spotify-player-target="container" hidden></div>
            </div>
            <%= button_to playlist_playlist_songs_path(current_user.current_playlist_id),
                params: { playlist_song: { song_id: song.id } },
                method: :post,
                class: "add-to-queue-btn",
                data: { turbo: false } do %>
              <i class="fa-solid fa-plus"></i>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <p style="color: #6c757d; text-align: center; padding: 2rem;">No songs found.</p>
  <% end %>
</div>
